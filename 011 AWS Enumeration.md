

- Reference: https://hackingthe.cloud/aws/enumeration/brute_force_iam_permissions/





### Authenticated

- Test credentials: `aws sts get-caller-identity --profile bilbo`
- List policies attached to your user: `aws --profile bilbo --region us-east-1 iam list-user-policies --user-name cg-bilbo-vulnerable_lambda_cgidi03hggtyww`
	- Note: the user name in this example was taken from this arn: `arn:aws:iam::975375066142:user/cg-bilbo-vulnerable_lambda_cgidi03hggtyww`
- List permissions under policies: `aws --profile bilbo --region us-east-1 iam get-user-policy --user-name cg-bilbo-vulnerable_lambda_cgidi03hggtyww --policy-name cg-bilbo-vulnerable_lambda_cgidi03hggtyww-standard-user-assumer`
- List roles: `aws --profile bilbo iam list-roles`
	- Interesting roles allow things like `"Action": "sts:AssumeRole"`
- List policies for target role: `aws --profile bilbo --region us-east-1 iam list-role-policies --role-name`
- Get credentials for a role: `aws --profile bilbo --region us-east-1 sts assume-role --role-arn arn:aws:iam::975375066142:role/cg-lambda-invoker-vulnerable_lambda_cgidi03hggtyww --role-session-name thisdoesntmatter`